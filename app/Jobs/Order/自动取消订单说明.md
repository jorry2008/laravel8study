**十、自动取消已放弃的订单**

需求：用户下单后未付款，此时未付款订单锁了库存，处于库存占用状态，所以需要在一定时间（60分钟）内自动取消订单并释放库存。
为了用户体验更好，取消库存之前应该给用户每隔10分钟，共推送3条催付款的信息。
重点：满足高并发，使用异步处理。
> 优秀的思路：<br />
> 生成订单成功，注入自动取消job，60分钟后，催发第一条信息，并将当前任务延期10分钟，<br />
> 延期到时间后，催发第二条信息，再次延期10分钟，<br />
> 延期到时间后，催发第三条信息，再次延期10分钟，<br />
> 最后一次到期，取消订单，释放库存。<br />
> 重点小结：在任何时候，下单即加入自动取消订单队列，到时间后，未付款订单走此Job流程，非未付款的订单自动完成队列即可。此思路简单，切入点单一。
